cors=function(){function e(e,r,s,u){function i(t){return new Error("corsRequest: "+e+" "+r+": "+t)}var a=this;if(this.method=e,this.url=r,this.data=s,this.req=new t,this.req.open(this.method,this.url),this.req.onerror=function(){a.err=i("error"),u(a.err)},this.req.onload=function(){if(!n||4===a.req.readyState){if(n&&0===a.req.status)return a.err=i("incomplete"),void u(a.err);a.err=null,a.res={status:n?a.req.status:200,text:a.req.responseText,json:JSON.parse(a.req.responseText)},u(a.err,a.res)}},this.data)var o=JSON.stringify(s);a.req.send(o||null)}function r(){var r,t,n,u;return r=arguments[0].toUpperCase(),t=arguments[1],3===arguments.length&&("function"==typeof arguments[2]?u=arguments[2]:n=arguments[2]),arguments.length>3&&(n=arguments[2],u=arguments[3]),new e(r,t,n,u||s)}var t,n="withCredentials"in new XMLHttpRequest;!n&&"undefined"!=typeof XDomainRequest;t=n?XMLHttpRequest:XDomainRequest;var s=function(){};return r}();
