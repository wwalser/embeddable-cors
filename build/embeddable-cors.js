var cors=function(){function e(e,t,s,u){function a(r){return new Error("corsRequest: "+e+" "+t+": "+r)}var i=this;if(this.method=e,this.url=t,this.data=s,this.req=new r,this.req.open(this.method,this.url),this.req.onerror=function(){i.err=a("error"),u(i.err)},this.req.onload=function(){if(!n||4===i.req.readyState){if(n&&0===i.req.status)return i.err=a("incomplete"),void u(i.err);i.err=null,i.res={status:n?i.req.status:200,text:i.req.responseText,json:i.req.responseText.length&&JSON.parse(i.req.responseText)},u(i.err,i.res)}},this.data){var o=JSON.stringify(s);i.req.setRequestHeader&&i.req.setRequestHeader("Content-Type","application/json")}i.req.send(o||null)}function t(){var t,r,n,u;return t=arguments[0].toUpperCase(),r=arguments[1],3===arguments.length&&("function"==typeof arguments[2]?u=arguments[2]:n=arguments[2]),arguments.length>3&&(n=arguments[2],u=arguments[3]),new e(t,r,n,u||s)}var r,n="withCredentials"in new XMLHttpRequest;!n&&"undefined"!=typeof XDomainRequest;r=n?XMLHttpRequest:XDomainRequest;var s=function(){};return t}();
